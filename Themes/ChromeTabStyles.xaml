<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    
    <!-- Chrome-style close button -->
    <Style x:Key="ChromeCloseButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Foreground" Value="#5A6069"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="Border" 
                            Background="{TemplateBinding Background}"
                            CornerRadius="2">
                        <ContentPresenter HorizontalAlignment="Center" 
                                        VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Border" Property="Background" Value="#E0E0E0"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="Border" Property="Background" Value="#D0D0D0"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Enhanced Chrome-style pinned tab template with better visual feedback -->
    <ControlTemplate x:Key="ChromePinnedTabTemplate" TargetType="{x:Type TabItem}">
        <Border x:Name="TabBorder"
                Background="{StaticResource TabInactiveGradient}"
                BorderBrush="#0078D4"
                BorderThickness="2,2,2,0"
                CornerRadius="8,8,0,0"
                Margin="2,3,2,-1"
                Padding="0"
                Width="45"
                MinWidth="45"
                MaxWidth="45"
                RenderTransformOrigin="0.5,0.5">
            <Border.RenderTransform>
                <ScaleTransform x:Name="TabScale" ScaleX="1" ScaleY="1"/>
            </Border.RenderTransform>
            <Border.Effect>
                <DropShadowEffect x:Name="TabShadow" 
                                Color="#0078D4" 
                                Direction="270" 
                                ShadowDepth="3" 
                                BlurRadius="8" 
                                Opacity="0.3"/>
            </Border.Effect>
            
            <!-- Enhanced pinned content with better visual indicator -->
            <Grid>
                <!-- Pin indicator background -->
                <Ellipse x:Name="PinBackground"
                        Width="24" Height="24"
                        Fill="#0078D4"
                        Opacity="0.15"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                
                <!-- Pin icon with enhanced visibility -->
                <TextBlock x:Name="PinIcon"
                          Text="ðŸ“Œ"
                          FontSize="16"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          Foreground="#0078D4"
                          FontWeight="Bold"
                          RenderTransformOrigin="0.5,0.5">
                    <TextBlock.RenderTransform>
                        <RotateTransform Angle="0"/>
                    </TextBlock.RenderTransform>
                </TextBlock>
                
                <!-- Tooltip for better UX -->
                <Grid.ToolTip>
                    <ToolTip>
                        <StackPanel>
                            <TextBlock Text="{Binding Tag.Title, RelativeSource={RelativeSource TemplatedParent}}" 
                                      FontWeight="Bold"/>
                            <TextBlock Text="Pinned Tab - Right-click to unpin" 
                                      FontSize="11" 
                                      Foreground="Gray"/>
                        </StackPanel>
                    </ToolTip>
                </Grid.ToolTip>
            </Grid>
        </Border>
        
        <ControlTemplate.Triggers>
            <!-- Hover effect for pinned tabs -->
            <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="TabBorder" Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#F0F8FF" Offset="0"/>
                            <GradientStop Color="#E6F3FF" Offset="1"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter TargetName="PinBackground" Property="Opacity" Value="0.25"/>
                <!-- Note: Can't directly target TabShadow as it's inside Border.Effect -->
                <Trigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="TabScale"
                                           Storyboard.TargetProperty="ScaleX"
                                           To="1.05"
                                           Duration="0:0:0.15"/>
                            <DoubleAnimation Storyboard.TargetName="TabScale"
                                           Storyboard.TargetProperty="ScaleY"
                                           To="1.05"
                                           Duration="0:0:0.15"/>
                        </Storyboard>
                    </BeginStoryboard>
                </Trigger.EnterActions>
                <Trigger.ExitActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="TabScale"
                                           Storyboard.TargetProperty="ScaleX"
                                           To="1.0"
                                           Duration="0:0:0.15"/>
                            <DoubleAnimation Storyboard.TargetName="TabScale"
                                           Storyboard.TargetProperty="ScaleY"
                                           To="1.0"
                                           Duration="0:0:0.15"/>
                        </Storyboard>
                    </BeginStoryboard>
                </Trigger.ExitActions>
            </Trigger>
            
            <!-- Selected State with enhanced styling -->
            <Trigger Property="IsSelected" Value="True">
                <Setter TargetName="TabBorder" Property="Background" Value="White"/>
                <Setter TargetName="TabBorder" Property="BorderBrush" Value="#0078D4"/>
                <Setter TargetName="TabBorder" Property="BorderThickness" Value="3,3,3,0"/>
                <Setter TargetName="PinIcon" Property="Foreground" Value="#0078D4"/>
                <Setter TargetName="PinBackground" Property="Fill" Value="#0078D4"/>
                <Setter TargetName="PinBackground" Property="Opacity" Value="0.2"/>
                <Setter Property="Panel.ZIndex" Value="2"/>
            </Trigger>
            
            <!-- Loading state for pinned tabs -->
            <DataTrigger Binding="{Binding Tag.IsLoading, RelativeSource={RelativeSource Self}}" Value="True">
                <Setter TargetName="PinIcon" Property="Text" Value="âŸ³"/>
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard RepeatBehavior="Forever">
                            <DoubleAnimation Storyboard.TargetName="PinIcon"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                                           From="0"
                                           To="360"
                                           Duration="0:0:1"/>
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- Tab Drop Zone Style -->
    <Style TargetType="{x:Type local:TabDropZone}" xmlns:local="clr-namespace:ExplorerPro.UI.Controls">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:TabDropZone}">
                    <Grid>
                        <Rectangle Width="3" Height="30"
                                 Fill="#0078D4"
                                 RadiusX="1.5" RadiusY="1.5">
                            <Rectangle.Effect>
                                <DropShadowEffect Color="#0078D4" 
                                                BlurRadius="8" 
                                                ShadowDepth="0"
                                                Opacity="0.8"/>
                            </Rectangle.Effect>
                        </Rectangle>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Opacity" Value="0"/>
    </Style>

    <!-- Enhanced Chrome Tab Style with Drag Animations -->
    <Style x:Key="ChromeTabItemStyle" TargetType="{x:Type TabItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Border x:Name="TabBorder"
                            Background="{StaticResource TabInactiveGradient}"
                            BorderBrush="#D0D7DE"
                            BorderThickness="1,1,1,0"
                            CornerRadius="8,8,0,0"
                            Margin="2,3,2,-1"
                            Padding="8,6,24,6"
                            RenderTransformOrigin="0.5,0.5">
                        <Border.RenderTransform>
                            <ScaleTransform x:Name="TabScale" ScaleX="1" ScaleY="1"/>
                        </Border.RenderTransform>
                        <Border.Effect>
                            <DropShadowEffect x:Name="TabShadow" 
                                            Color="#FF000000" 
                                            Direction="270" 
                                            ShadowDepth="2" 
                                            BlurRadius="6" 
                                            Opacity="0.1"/>
                        </Border.Effect>
                        
                        <Grid>
                            <ContentPresenter x:Name="ContentSite"
                                            ContentSource="Header"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"/>
                            
                            <Button x:Name="CloseButton"
                                    Style="{StaticResource ChromeCloseButtonStyle}"
                                    Content="Ã—"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    Width="16"
                                    Height="16"
                                    Margin="4,0,0,0"
                                    Visibility="{Binding Tag.ShowCloseButton, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BoolToVisibilityConverter}}"/>
                        </Grid>
                    </Border>
                    
                    <ControlTemplate.Triggers>
                        <!-- Selected State -->
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="TabBorder" Property="Background" Value="White"/>
                            <Setter TargetName="TabBorder" Property="BorderBrush" Value="#0078D4"/>
                            <Setter Property="Panel.ZIndex" Value="2"/>
                        </Trigger>
                        
                        <!-- Enhanced Dragging State -->
                        <DataTrigger Binding="{Binding Tag.IsDragging, RelativeSource={RelativeSource Self}}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                       To="0.3" Duration="0:0:0.15"/>
                                        <DoubleAnimation Storyboard.TargetName="TabScale"
                                                       Storyboard.TargetProperty="ScaleX"
                                                       To="0.95" Duration="0:0:0.15">
                                            <DoubleAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <DoubleAnimation Storyboard.TargetName="TabScale"
                                                       Storyboard.TargetProperty="ScaleY"
                                                       To="0.95" Duration="0:0:0.15">
                                            <DoubleAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                       To="1.0" Duration="0:0:0.15"/>
                                        <DoubleAnimation Storyboard.TargetName="TabScale"
                                                       Storyboard.TargetProperty="ScaleX"
                                                       To="1.0" Duration="0:0:0.15">
                                            <DoubleAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseIn"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <DoubleAnimation Storyboard.TargetName="TabScale"
                                                       Storyboard.TargetProperty="ScaleY"
                                                       To="1.0" Duration="0:0:0.15">
                                            <DoubleAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseIn"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                        
                        <!-- Drop Target Highlighting -->
                        <DataTrigger Binding="{Binding Tag.IsDropTarget, RelativeSource={RelativeSource Self}}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="TabBorder"
                                                      Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                      To="#E3F2FD" Duration="0:0:0.2"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="TabBorder"
                                                      Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                      Duration="0:0:0.2"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary> 